<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div fxLayout="column" fxLayout.gt-sm="row wrap"> 
        <div fxFlex="30" class="flex-p"> 
            <mat-card>
                <mat-card-header fxLayoutAlign="center">                
                    <mat-card-subtitle><h2>Date d'écriture</h2></mat-card-subtitle>
                </mat-card-header>
                <br />
                <mat-card-content fxLayoutAlign="center">
                    <mat-form-field class="w-100">
                        <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="pickerDate" placeholder="Date de l'écriture" formControlName="dateEcriture">
                        <mat-datepicker-toggle matSuffix [for]="pickerDate">
                            <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
                        </mat-datepicker-toggle>
                        <mat-datepicker #pickerDate></mat-datepicker>
                        <mat-error *ngIf="form.controls.dateEcriture.errors?.required">La date de l'écriture est nécessaire</mat-error>
                    </mat-form-field>
                </mat-card-content>
            </mat-card>
            <br />
            <mat-card>
                <mat-card-header fxLayoutAlign="center">                
                    <mat-card-subtitle><h2>Montant CHF</h2></mat-card-subtitle>
                </mat-card-header>
                <mat-card-content fxLayoutAlign="center">
                    <mat-form-field class="w-100">
                        <input matInput type="text" class="montantInput" value="" (blur)="blurMontant()" formControlName="montant"/>
                        <mat-icon class="montantMatIcon" matSuffix>money</mat-icon>
                        <mat-error *ngIf="form.controls.montant.errors?.required">Le montant est nécessaire</mat-error>
                        <mat-error *ngIf="form.controls.montant.errors?.montantInvalide">Veuillez insérer un montant en positif ou négatif</mat-error>
                    </mat-form-field>
                </mat-card-content>
            </mat-card>
            <br />
            <mat-card>
                <mat-card-header fxLayoutAlign="center">                
                    <mat-card-subtitle><h2>Pièce</h2></mat-card-subtitle>
                </mat-card-header>
                <mat-card-content fxLayoutAlign="center">
                    <table cellspacing="0" cellpadding="0" class="w-100">
                        <tr>
                            <td style="width: 15%;">
                                <mat-form-field class="w-100 noPieceSize">
                                    <mat-icon class="noPieceMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>add</mat-icon>
                                    <input matInput maxlength="12" type="number" placeholder="N° de pièce" formControlName="noPiece" value="" (blur)="blueNoPiece()">
                                </mat-form-field>
                            </td>
                            <td style="width: 75%;">
                                <mat-form-field class="w-100">
                                    <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="pickerPiece" placeholder="Date de la pièce">
                                    <mat-datepicker-toggle matSuffix [for]="pickerPiece">
                                        <mat-icon matDatepickerToggleIcon>calendar_today</mat-icon>
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #pickerPiece></mat-datepicker>
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>
                </mat-card-content>
            </mat-card>
        </div> 
        <div fxFlex="35" class="flex-p">  
            <mat-card>
                <mat-card-header fxLayoutAlign="center">                
                    <mat-card-subtitle><h2>Débit</h2></mat-card-subtitle>
                </mat-card-header>
                <mat-card-content fxLayoutAlign="center" class="flexbox">
                    <!--<table cellspacing="0" cellpadding="0" class="w-100">
                        <tr>
                            <td style="width: 15%;">
                                <mat-form-field class="w-100 noCompteSize">
                                    <input type="text" maxlength="6" [placeholder]="placeholderNoCompteDebit" aria-label="Number" matInput formControlName="noCompteDebit" [matAutocomplete]="autoDebit">
                                    <mat-autocomplete #autoDebit="matAutocomplete" class="noCompteAutoComplete">
                                        <mat-option *ngFor="let option of filteredOptionsDebit | async" [value]="option">
                                        {{ option }}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <mat-icon class="noCompteMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <mat-error *ngIf="form.controls.noCompteDebit.errors?.noCompteInvalide">{{ matErrorNoCompteDebit }}</mat-error>
                                    <mat-error *ngIf="form.controls.noCompteDebit.errors?.required">N° nécessaire</mat-error>
                                    <mat-error *ngIf="form.controls.noCompteDebit.hasError('minlength')">N° à 6 chiffres</mat-error>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field class="w-100">
                                    <input matInput maxlength="30" [placeholder]="placeholderCompteDebit" formControlName="compteDebit" value="">
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>-->
                    <input-no-compte-form-field 
                        [formGroup]="form.get('compteDebit')" 
                        fbNoCompte="noCompteDebit"
                        fbCompte="compteDebit"
                        [planComptable]="planComptable"
                        [touch]="swTouch"
                        class="w-100"
                    ></input-no-compte-form-field>
                    <div class="new-row"></div>
                    <table cellspacing="0" cellpadding="0" class="w-100">
                        <tr>
                            <td colspan="2">
                                <mat-form-field class="w-100">
                                    <mat-icon class="libelleMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <input matInput maxlength="25" placeholder="Libellé 1" formControlName="libelle1Debit" value="" (blur)="blurLibelle1Debit()">
                                </mat-form-field>
                            </td>
                        <tr>
                            <td colspan="2">
                                <mat-form-field class="w-100">
                                    <mat-icon class="libelleMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <input matInput maxlength="25" placeholder="Libellé 2" formControlName="libelle2Debit" value="" (blur)="blurLibelle2Debit()">
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>
                </mat-card-content>
            </mat-card>
        </div>
        <div fxFlex="35" class="flex-p">  
            <mat-card>
                <mat-card-header fxLayoutAlign="center">                
                    <mat-card-subtitle><h2>Crédit</h2></mat-card-subtitle>
                </mat-card-header>
                <mat-card-content fxLayoutAlign="center">
                    <table cellspacing="0" cellpadding="0" class="w-100">
                        <tr>
                            <td style="width: 15%;">
                                <mat-form-field class="w-100 noCompteSize">
                                    <input type="text" maxlength="6" [placeholder]="placeholderNoCompteCredit" aria-label="Number" matInput formControlName="noCompteCredit" [matAutocomplete]="autoCredit">
                                    <mat-autocomplete #autoCredit="matAutocomplete" class="noCompteAutoComplete">
                                        <mat-option *ngFor="let option of filteredOptionsCredit | async" [value]="option">
                                        {{ option }}
                                        </mat-option>
                                    </mat-autocomplete>
                                    <mat-icon class="noCompteMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <mat-error *ngIf="form.controls.noCompteCredit.errors?.noCompteInvalide">{{ matErrorNoCompteDebit }}</mat-error>
                                    <mat-error *ngIf="form.controls.noCompteCredit.errors?.required">N° nécessaire</mat-error>
                                    <mat-error *ngIf="form.controls.noCompteCredit.hasError('minlength')">N° à 6 chiffres</mat-error>
                                </mat-form-field>
                            </td>
                            <td>
                                <mat-form-field class="w-100">
                                    <input matInput maxlength="30" [placeholder]="placeholderCompteCredit" formControlName="compteCredit" value="">
                                </mat-form-field>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2">
                                <mat-form-field class="w-100">
                                    <mat-icon class="libelleMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <input matInput maxlength="25" placeholder="Libellé 1" formControlName="libelle1Credit" value="" (blur)="blurLibelle1Credit()">
                                </mat-form-field>
                            </td>
                        <tr>
                            <td colspan="2">
                                <mat-form-field class="w-100">
                                    <mat-icon class="libelleMatIcon" (click)="selectionPlanComptableDebit()" matPrefix>zoom_in</mat-icon>
                                    <input matInput maxlength="25" placeholder="Libellé 2" formControlName="libelle2Credit" value="" (blur)="blurLibelle2Credit()">
                                </mat-form-field>
                            </td>
                        </tr>
                    </table>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
    <div fxLayout="column">
        <div class="flex-p">
            <button kendoButton [icon]="'plus'" [primary]="true" style="float: right;" type="submit">Ajouter écriture</button>
        </div>
    </div>
</form>
